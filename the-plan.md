1) Цель и ключевые сценарии (MVP)
Главная ценность
Пользователь быстро добавляет цену товара, привязывает к категории, дате, месту (город/район/тип точки).

Система показывает:
    нормальную/среднюю цену по региону и времени
    динамику (график)
    где дешевле (рейтинг точек/районов)

Основные действия пользователя
Найти товар → увидеть цены/динамику
Нажать “+ Цена” → внести цену за 10–20 секунд
Опционально: “Зафиксировать покупку” (кол-во) → личная статистика

2) Типы пользователей (минимум 3)
Гость (просмотр)
Без авторизации: просмотр ограниченный (например, только общие графики, без точных адресов/деталей)
Пользователь (авторизованный)
Добавляет цены, видит аналитику, ведёт “мои покупки”
Админ/модератор
Управление категориями, товарами, жалобами, блокировка спама/фейков, проверка подозрительных цен
(Если хочешь “ти возможно” = “модератор” как промежуточная роль между юзером и админом.)

3) Данные и сущности (как хранить)
Сущности
User
id, displayName, role, createdAt
Category
id, name, parentId? (если дерево)
Product
id, name, categoryId, brand?, unit (кг/л/шт), optional “country”
Place (точка/место)
id, country, city, district, type: bazaar | shop | private | other, name? (опционально), geo? (потом)
PriceReport (главная запись)
id, productId, placeId, price, currency, quantityUnit (за кг/за шт),
dateObserved (когда видели), createdAt,
createdByUserId,
optional: comment/photo, reliability flags
Purchase (опционально, личное)
id, productId, quantity, pricePaid, date, placeId?, userId (private)
Важное решение про приватность
PriceReport — общий (видят все)
Purchase — личный (видит только пользователь)

4) Бизнес-логика (как считать “адекватность” цены)
Агрегации (что показываем)
Средняя / медиана цены по:
региону (город/район) + период (7/30/90 дней)
Диапазон (min–max) и “норма”
Динамика (по дням/неделям)
Антиспам / качество данных (простое MVP)
ограничение: “не больше N записей в минуту”
подсветка подозрительных цен:
если сильно отклоняется от медианы (например > 2.5σ или > X%)
жалоба “неверная цена” → очередь модерации

5) Основные экраны (минимальный набор)
Public/Guest
Landing / Главная
поиск товара, топ категорий, “как работает”
Каталог товаров / Поиск
строка поиска + фильтры: категория, город, тип точки
Карточка товара (самый важный экран)
текущая “нормальная цена” (медиана/средняя)
график цены (7/30/90)

“где дешевле” (топ мест/районов)

кнопка + 

Auth user

 (быстрая форма)

товар (поиск/последние)

цена

место: город → район → тип (базар/магазин/частник)

дата (по умолчанию сегодня)

комментарий (опц.)

кнопка “Сохранить”

Мои цены / Моя активность

список внесённых цен, редактировать/удалить (в пределах времени)

Мои покупки (опционально)

добавить покупку

статистика: топ товаров, траты по категориям

Admin/Moderator

Панель модерации

жалобы, подозрительные записи

управление категориями/товарами/единицами

бан пользователей / ограничения

6) Навигация (пример структуры)

/ Главная

/search Поиск/каталог

/product/:id Карточка товара

/add-price  (auth)

/me/activity Моя активность (auth)

/me/purchases Мои покупки (auth, optional)

/admin Админка (role)

7) Технический план (Vue + Google база)
Стек (пример)

Vue 3 + TypeScript + Vite

Pinia (или Vue Query) для данных

Firebase Auth (Google / email)

Firestore (основная БД)

Cloud Functions (агрегации, антиспам, cron)

Charts: ECharts / Chart.js

UI: твоё/любой кит + dark/light theme (CSS vars)

Архитектура проекта (в твоём стиле)

features/price-report/ (внесение цены, список)

features/product/ (каталог, карточка товара)

features/analytics/ (графики, сравнения)

features/auth/

features/admin/

shared/ (ui, api, utils, types)

composables/ (useAuth, useFirestore, usePermissions)

8) План разработки по этапам (реальный roadmap)
Этап 0 — подготовка

Описать MVP-правила и поля (unit, currency, места)

Нарисовать 5–7 простых вайрфреймов экранов

Этап 1 — база

Firebase проект, Auth, Firestore структуры

Роутинг + guard по ролям

Темная/светлая тема

Этап 2 — ключевой функционал (цены)

Поиск товара + карточка товара

Добавление PriceReport

Лента цен по товару (таблица)

Базовые фильтры: город/район/тип

Этап 3 — аналитика

График динамики (7/30/90)

“Где дешевле” (агрегации)

Подсветка “подозрительных” цен

Этап 4 — социальное взаимодействие (простое)

Профиль пользователя (имя/статистика)

Лента “последние цены в моём городе”

Комменты/реакции (если нужно) — лучше позже

Этап 5 — покупки (опционально)

Личный лог покупок + статистика

Этап 6 — админка и качество данных

жалобы, модерация

управление каталогом

лимиты/бан

9) Тесты (что реально покрывать)

Покрывать тестами “чистую логику”, не Firestore напрямую:

нормализация цены (за кг/шт)

расчёт медианы/средней, группировка по дням

выявление аномалий

фильтрация/сортировка результатов

права доступа (role-based rules) — часть можно тестировать как функции

10) Что можно добавить “позже”, чтобы не утонуть

сравнение стран/валют (конвертация)

фото чека/товара

геолокация и карта

офлайн режим

рекомендации “где выгодно сегодня”